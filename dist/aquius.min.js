var aquius=aquius||{init:function(e,t){"use strict";var n=document.getElementById(e);function r(e,t){function n(e,t){var n,r=[];for(n=0;n<t.length;n+=1)("here"===t[n]||t[n]in e.dataObject&&e.dataObject[t[n]].length>0)&&r.push(t[n]);return r}return n(e,"boolean"==typeof t&&!0===t?["link","place","node"]:["place","link","node","here"])}function a(e,t,n){var r,a,i,o=document.createElement(e);if(void 0!==t)for(r=Object.keys(t),i=0;i<r.length;i+=1)o[r[i]]=t[r[i]];if(void 0!==n)for(a=Object.keys(n),i=0;i<a.length;i+=1)o.style[a[i]]=n[a[i]];return o}function i(e,t){for(var n,r=document.getElementById(e._id),i=a("div",{},{margin:"0 auto","max-width":"800px","text-align":"center"});r.firstChild;)r.removeChild(r.firstChild);return"map"in e&&"function"==typeof e.map.remove&&(e.map.remove(),r.className=""),n=void 0!==t?"ðŸš«":"ðŸŒ",i.appendChild(a("div",{textContent:n},{"font-size":"1000%"})),void 0!==t&&i.appendChild(a("p",{textContent:t.toString()})),r.appendChild(i),void 0===t}function o(e,t){var n,r,a,o,c;function l(t,n){var r;"css"===t.split(".").pop()?((r=document.createElement("link")).rel="stylesheet",r.href=t):((r=document.createElement("script")).type="text/javascript",r.src=t),r.onreadystatechange=n,r.onload=n,r.onerror=function(){return i(e,{message:"Could not load "+t})},document.head.appendChild(r)}if(r=function(){var t,n,r;"dataset"in e&&"string"==typeof e.dataset?(t=e.dataset,n=function(t){return e.dataObject=t,g(e)},(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState){if(200!==r.status)return i(e,{message:r.status+": Could not load "+t});var a=JSON.parse(r.responseText);n&&n(a)}},r.open("GET",t),r.send()):g(e)},0===t.length)r();else for(a=0,o=function(){n=arguments,(a+=1)>=t.length&&r.call(this,n)},c=0;c<t.length&&!(c>=t.length);c+=1)l(t[c],o)}function c(e,t){return e.t in e.translation&&t in e.translation[e.t]?e.translation[e.t][t]:e.locale in e.translation&&t in e.translation[e.locale]?e.translation[e.locale][t]:""}function l(e,t){var n,r,a,i=Object.keys(e._toLocale);for(a=0;a<i.length;a+=1)(n=document.getElementById(i[a]))&&""!==(r=c(e,e._toLocale[i[a]]))&&(n.textContent=r);return void 0!==t&&!0===t&&p(e,!0),e}function d(e,t){var n={};function r(){var e,t={},n=decodeURIComponent(document.location.hash.trim()).slice(1).split("/");for(e=0;e<n.length;e+=1)n[e].length>=2&&/^[a-z\-()]$/.test(n[e][0])&&(t[n[e][0]]=n[e].slice(1));return t}function a(e){try{return null!==sessionStorage.getItem(e._id)?JSON.parse(sessionStorage.getItem(e._id)):{}}catch(e){return{}}}return!sessionStorage||"uiStore"in e!=!1&&!0!==e.uiStore||(n="object"==typeof t?function(e,t){var n,r=a(e),i=Object.keys(t);for(n=0;n<i.length;n+=1)r[i[n]]=t[i[n]];try{sessionStorage.setItem(e._id,JSON.stringify(r))}catch(e){}return r}(e,t):a(e)),"uiHash"in e==!0&&!0===e.uiHash&&(n="object"==typeof t?function(e,t){var n,a,i,o=r(),c=Object.keys(t);for(i=0;i<c.length;i+=1)1===c[i].length&&/^[a-z\-()]$/.test(c[i])&&(o[c[i]]=t[c[i]]);for(n=Object.keys(o),a=[],i=0;i<n.length;i+=1)a.push(n[i]+encodeURIComponent(o[n[i]]));return location.hash="#"+a.join("/"),o}(0,t):r()),n}function s(e){var t;function n(e,t){return e._layer[t].on("add",function(){-1===e.v.indexOf(t.charAt(0))&&(e.v+=t.charAt(0),d(e,{v:e.v}))}),e._layer[t].on("remove",function(){e.v=e.v.replace(t.charAt(0),""),d(e,{v:e.v})}),e}function i(e,t,n,r,i){var o,c,l;if(n in e.dataObject&&Array.isArray(e.dataObject[n])&&e.dataObject[n].length>1&&!0===e[i]){for(c=[],l=0;l<e.dataObject[n].length;l+=1)c.push({value:l,id:e._id+n+l}),e._toLocale[e._id+n+l]="_"+n+l;(o=function(e,t,n,r){var i,o,c,l,d;for(void 0===r&&(r={}),i=a("div",{id:t},r),d=0;d<e.length;d+=1)c=a("label"),o=a("input",{type:"radio",name:t}),"value"in e[d]&&(o.value=e[d].value,void 0!==n&&e[d].value===n&&(o.checked="checked")),c.appendChild(o),l=a("span"),"id"in e[d]&&(l.id=e[d].id),"label"in e[d]&&(l.textContent=e[d].label),c.appendChild(l),i.appendChild(c);return i}(c,e._id+n,e[r],{"border-top":"1px solid #ddd","margin-top":"4px","padding-top":"4px"})).addEventListener("change",function(){e[r]=parseInt(document.querySelector("input[name='"+e._id+n+"']:checked").value,10);var t={};t[r]=e[r],d(e,t),p(e)},!1),t.appendChild(o)}return e}function o(e,t,n,r,i,o,c,l,s){var u,f,h,b;return!0===e[i]&&(b=a("label"),f=e._id+n+"name",b.appendChild(a("div",{id:f},{"border-top":"1px solid #ddd","margin-top":"4px","padding-top":"4px","text-align":"center"})),e._toLocale[f]=n,u=a("div",{},{"text-align":"center"}),(h=a("input",{id:e._id+n,type:"range",min:o,max:c,value:e[r]})).addEventListener("change",function(){var t={};e[r]=parseInt(document.getElementById(e._id+n).value,10),t[r]=e[r],d(e,t),p(e,l)},!1),u.appendChild(h),b.appendChild(u),void 0!==s&&(f=e._id+n+"legend",b.appendChild(a("div",{id:f},{color:"#888","text-align":"center"})),e._toLocale[f]=s),t.appendChild(b)),e}function c(e){return"_control"in e&&delete e.control,l(e)}return e._toLocale={},e._layer={},(t=function(e){var t,n;if("_control"in e)for(t=e._control.getContainer().childNodes,n=0;n<t.length;n+=1)if("SECTION"===t[n].tagName||"FORM"===t[n].tagName)return t[n];return!1}(e=function(e){var t,i,o=r(e).reverse();for(e._control=e.leaflet.control.layers(),i=0;i<o.length;i+=1)e._layer[o[i]]=e.leaflet.layerGroup(),-1!==(e=n(e,o[i])).v.indexOf(o[i].charAt(0))&&e._layer[o[i]].addTo(e.map),t=e._id+o[i]+"name",e._toLocale[t]=o[i],e._control.addOverlay(e._layer[o[i]],a("span",{id:t},{color:e[o[i]+"Color"]}).outerHTML);return e._control.addTo(e.map),e}(e=function(e){var t,n,i,o,c,l;return!0===e.uiPanel&&((t=e.leaflet.control({position:"bottomleft"})).onAdd=function(){for(n=a("div",{className:"aquius-panel",id:e._id+"panel"},{"background-color":"rgba(255,255,255,"+e.panelOpacity+")","font-weight":"bold",padding:"0 3px","border-radius":"5px","margin-right":"10px"}),e.leaflet.DomEvent.disableClickPropagation(n),c=r(e,!0),l=0;l<c.length;l+=1)(i=a("span",{},{color:e[c[l]+"Color"],margin:"0 0.1em"})).appendChild(a("span",{id:e._id+c[l]+"value",textContent:"0"},{"font-size":Math.round(150*e.panelScale).toString()+"%",margin:"0 0.1em"})),o=e._id+c[l]+"label",i.appendChild(a("span",{id:o},{"font-size":Math.round(100*e.panelScale).toString()+"%",margin:"0 0.1em","vertical-align":"10%"})),e._toLocale[o]=c[l],n.appendChild(i),n.appendChild(document.createTextNode(" "));return n},t.addTo(e.map)),e}(e=function(e){var t,n,r,i,o,c,s,p=Object.keys(e.translation).sort();return!0===e.uiLocale&&p.length>1&&((t=e.leaflet.control({position:"topright"})).onAdd=function(){for(n=a("div",{className:"aquius-locale",id:e._id+"locale"},{"background-color":"#fff","border-bottom":"2px solid rgba(0,0,0,0.3)","border-left":"2px solid rgba(0,0,0,0.3)","border-radius":"0 0 0 5px",margin:0,padding:"0 0 1px 1px"}),e.leaflet.DomEvent.disableClickPropagation(n),r=e._id+"langname",n.appendChild(a("label",{id:r,for:e._id+"lang"},{display:"none"})),e._toLocale[r]="language",c=[],s=0;s<p.length;s+=1)i="lang"in e.translation[p[s]]?e.translation[p[s]].lang:p[s],c.push({value:p[s],label:i});return(o=function(e,t){var n,r,i=a("select");for(r=0;r<e.length;r+=1)n=a("option"),"value"in e[r]&&(n.value=e[r].value,e[r].value===t&&(n.selected="selected")),"label"in e[r]&&(n.textContent=e[r].label),"id"in e[r]&&(n.id=e[r].id),i.appendChild(n);return i}(c,e.t)).id=e._id+"lang",o.style["background-color"]="#fff",o.style.border="none",o.style.color="#000",o.style.font='12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif',o.addEventListener("change",function(){e.t=document.getElementById(e._id+"lang").value,d(e,{t:e.t}),l(e,!0)},!1),n.appendChild(o),n},t.addTo(e.map)),e}(e=function(e){var t,n,r=["_datasetName","_datasetAttribution"];for(n=0;n<r.length;n+=1)e._toLocale[e._id+r[n]]=r[n],r[n]=e._id+r[n];return t=a("span"),"meta"in e.dataObject&&"url"in e.dataObject.meta&&"string"==typeof e.dataObject.meta.url?t.appendChild(a("a",{href:e.dataObject.meta.url,id:r[0]})):t.appendChild(a("span",{id:r[0]})),t.appendChild(document.createTextNode(" ")),t.appendChild(a("span",{id:r[1]})),e.map.attributionControl.addAttribution(t.outerHTML),e}(e))))))?(e=i(e,t,"network","n","uiNetwork"),"place"in(e=i(e,t,"service","r","uiService")).dataObject&&e.dataObject.place.length>0&&o(e,t,"connectivity","p","uiConnectivity",0,3,!1,"connectivityRange"),c(e=function(e,t){var n,i,o,c,l,d,s,p;return!0===e.uiShare&&Blob&&(c=a("div",{},{"border-top":"1px solid #ddd","margin-top":"4px","padding-top":"4px","text-align":"center"}),""!==e.dataset&&(l=e._id+"embed",(n=a("a",{id:l,download:e._id+"-embed.txt",role:"button"},{cursor:"pointer"})).addEventListener("click",function(){n.href=window.URL.createObjectURL(function(e){var t=[];return t.push(a("div",{id:e._id},{height:"100%"}).outerHTML),t.push(a("script",{src:function(){var e,t=document.getElementsByTagName("script");for(e=0;e<t.length;e+=1)if(-1!==t[e].src.indexOf("aquius"))return t[e].src;return"\x3c!--Script URL--\x3e"}()}).outerHTML),t.push(a("script",{textContent:'window.addEventListener("load",function(){aquius.init("'+e._id+'",'+JSON.stringify(function(e){var t,n={base:[{options:{attribution:"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",maxZoom:18},type:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],c:-1.43,connectivity:1,dataObject:{},dataset:"",hereColor:"#080",k:54.54,leaflet:{},linkColor:"#f00",linkScale:1,locale:"en-US",m:9,map:{},minWidth:2,minZoom:0,n:0,network:[],networkAdd:!0,nodeColor:"#333",nodeScale:1,p:0,panelOpacity:.7,panelScale:1,placeColor:"#00f",placeOpacity:.5,placeScale:1,v:"hlnp",r:0,s:5,uiConnectivity:!0,uiHash:!1,uiLocale:!0,uiNetwork:!0,uiPanel:!0,uiScale:!0,uiService:!0,uiShare:!0,uiStore:!0,t:"en-US",translation:{},x:10.35,y:50.03,z:4},r={},a=Object.keys(e);for(t=0;t<a.length;t+=1)"_"!==a[t].charAt(0)&&-1===["base","dataObject","leaflet","map","network","translation","uiHash"].indexOf(a[t])&&e[a[t]]!==n[a[t]]&&(r[a[t]]=e[a[t]]);return r}(e))+")});"}).outerHTML),new Blob([t.join("\n")],{type:"text/plain;charset=utf-8"})}(e))},!1),e._toLocale[l]="embed",c.appendChild(n),c.appendChild(document.createTextNode(" | "))),d=r(e),l=e._id+"export",(i=a("a",{id:l,download:e._id+"-export.json",role:"button"},{cursor:"pointer"})).addEventListener("click",function(){for(s={geoJSON:[],network:e.n,range:5e6/Math.pow(2,e.m),service:e.r,x:e.c,y:e.k},e.p>0&&(s.connectivity=2/(Math.pow(10,e.p)/10)*e.connectivity),p=0;p<d.length;p+=1)-1!==e.v.indexOf(d[p].charAt(0))&&s.geoJSON.push(d[p]);"object"==typeof e._here&&"dataObject"in e._here?(o=e._here.dataObject,s.sanitize=!1):(o=e.dataObject,s.sanitize=!0),i.href=window.URL.createObjectURL(new Blob([JSON.stringify(e._call(o,s))],{type:"application/json;charset=utf-8"}))},!1),e._toLocale[l]="export",c.appendChild(i),t.appendChild(c)),e}(e=o(e,t,"scale","s","uiScale",0,10,!0),t))):c(e)}function p(e,t){var n,r;void 0===t||!0!==t||"object"!=typeof e._here?(r={_configOptions:e,callback:u,network:e.n,range:5e6/Math.pow(2,e.m),service:e.r,x:e.c,y:e.k},e.p>0&&(r.connectivity=2/(Math.pow(10,e.p)/10)*e.connectivity),"object"==typeof e._here&&"dataObject"in e._here?(n=e._here.dataObject,r.sanitize=!1):(n=e.dataObject,r.sanitize=!0),e._call(n,r)):b(e)}function u(e,t,n){"_configOptions"in n&&(void 0===e?(n._configOptions._here=t,b(n._configOptions)):i(n._configOptions,e))}function f(e,t){var n,r=[];if("undefined"===t||!Array.isArray(t))return e.linkColor;for(n=0;n<t.length;n+=1)"c"in t[n]&&"reference"in e.dataObject&&"color"in e.dataObject.reference&&t[n].c>=0&&t[n].c<e.dataObject.reference.color.length&&-1===r.indexOf(e.dataObject.reference.color[t[n].c])&&r.push(e.dataObject.reference.color[t[n].c]);return 0===r.length?e.linkColor:1===r.length?r[0]:function(e){var t,n,r="#",a=[[],[],[]];for(n=0;n<e.length;n+=1)7===e[n].length&&"#"===e[n][0]&&(a[0].push(parseInt(e[n].slice(1,3),16)),a[1].push(parseInt(e[n].slice(3,5),16)),a[2].push(parseInt(e[n].slice(5,7),16)));for(n=0;n<a.length;n+=1){if(0===a[n].length)return r+e[0];(t=Math.round(a[n].reduce(function(e,t){return e+t},0)/a[n].length))<=16&&(r+="0"),r+=t.toString(16)}return r}(r)}function h(e,t,n,r,i){var o,c,l,d,s,p;function u(e,t,n,r,i){var o,c,l,d;if(void 0!==t&&Array.isArray(t)){for(o=a("div",{},{margin:"0.3em 0"}),r?o.style["font-weight"]="bold":o.style["line-height"]="2em",void 0!==i&&""!==i&&o.appendChild(a("div",{textContent:i},{"line-height":"1.2em",margin:"0"})),d=0;d<t.length;d+=1)"n"in t[d]&&("u"in t[d]&&"reference"in e.dataObject&&"url"in e.dataObject.reference&&t[d].u>=0&&t[d].u<e.dataObject.reference.url.length?(-1!==(l=a("a",{href:e.dataObject.reference.url[t[d].u]})).href.lastIndexOf("[*]")&&("i"in t[d]?l.href=l.href.replace("[*]",t[d].i):"n"in t[d]?l.href=l.href.replace("[*]",t[d].n):l.href=l.href.replace("[*]","")),r||(l.style.color="#000",l.style["text-decoration"]="none")):l=a("span"),l.textContent=t[d].n,r||(l.style.padding="0.2em 0.3em",l.style.border="1px solid #000",l.style["white-space"]="nowrap","reference"in e.dataObject&&"color"in e.dataObject.reference&&("c"in t[d]&&t[d].c>=0&&t[d].c<e.dataObject.reference.color.length&&(l.style["background-color"]=e.dataObject.reference.color[t[d].c],l.style["border-color"]=e.dataObject.reference.color[t[d].c]),"t"in t[d]&&t[d].t>=0&&t[d].t<e.dataObject.reference.color.length&&(l.style.color=e.dataObject.reference.color[t[d].t]))),o.appendChild(l),d<t.length-1&&(c=r?", ":" ",o.appendChild(document.createTextNode(c))));n.appendChild(o)}return n}if(l=u(e,i,l=a("div",{},{color:"#000"}),!0),n=n<10&&n%1!=0?(Math.round(10*n)/10).toString():Math.round(n).toString(),l.appendChild(a("div",{textContent:t+": "+n},{margin:"0.3em 0"})),"reference"in e.dataObject&&"product"in e.dataObject.reference&&e.dataObject.reference.product.length>1&&!0===e.uiNetwork){for(c=[],d=[],s=0;s<r.length;s+=1)if("p"in r[s])for(p=0;p<r[s].p.length;p+=1)void 0===d[r[s].p[p]]&&(d[r[s].p[p]]=[]),d[r[s].p[p]].push(r[s]);else c.push(r[s]);for(s=0;s<d.length;s+=1)void 0!==d[s]&&(s<e.dataObject.reference.product.length&&"object"==typeof e.dataObject.reference.product[s]?e.t in e.dataObject.reference.product[s]?d[s].unshift(e.dataObject.reference.product[s][e.t]):e.locale in e.dataObject.reference.product[s]?d[s].unshift(e.dataObject.reference.product[s][e.locale]):(o=Object.keys(e.dataObject.reference.product[s])).length>0?d[s].unshift(e.dataObject.reference.product[s][o[0]]):d[s].unshift(""):c=c.concat(d[s]));for(d.sort(),s=0;s<d.length;s+=1)void 0!==d[s]&&(l=u(e,d[s].slice(1),l,!1,d[s][0]))}else c=r;return c.length>0&&(l=u(e,c,l,!1)),l}function b(e){var t,n,a,i,o,l,d,s,p,u=r(e);for(s=0;s<u.length;s+=1)u[s]in e._layer&&e._layer[u[s]].clearLayers();if(!0===e.uiPanel&&"summary"in e._here)for(n=Object.keys(e._here.summary),s=0;s<n.length;s+=1)if(a=document.getElementById(e._id+n[s]+"value"))try{a.textContent=new Intl.NumberFormat(e.t).format(Math.round(e._here.summary[n[s]]))}catch(t){a.textContent=Math.round(e._here.summary[n[s]]).toString()}if("place"in e._here&&"place"in e.dataObject&&e.dataObject.place.length>0)for(l=Math.exp((e.s-5)/2)*e.placeScale/666,o=c(e,"place"),s=0;s<e._here.place.length;s+=1)if("circle"in e._here.place[s]&&"value"in e._here.place[s]&&e._here.place[s].circle.length>1){if(d=Math.round(e._here.place[s].value).toString()+" "+o,"place"in e._here.place[s]&&Array.isArray(e._here.place[s].place)){for(i=[],p=0;p<e._here.place[s].place.length;p+=1)"object"==typeof e._here.place[s].place[p]&&"n"in e._here.place[s].place[p]&&i.push(e._here.place[s].place[p].n);i.length>0&&(d+=" ("+i.join(", ")+")")}e.leaflet.circleMarker(e.leaflet.latLng([e._here.place[s].circle[1],e._here.place[s].circle[0]]),{fill:!0,fillColor:e.placeColor,fillOpacity:e.placeOpacity,radius:Math.ceil(Math.sqrt(e._here.place[s].value*l)),stroke:!1}).bindTooltip(d).addTo(e._layer.place)}if("link"in e._here)for(l=Math.exp((e.s-5)/2)*e.linkScale*4,o=c(e,"link"),s=0;s<e._here.link.length;s+=1)if("polyline"in e._here.link[s]&&"value"in e._here.link[s]){for(t=[],p=0;p<e._here.link[s].polyline.length;p+=1)e._here.link[s].polyline[p].length>1&&t.push([e._here.link[s].polyline[p][1],e._here.link[s].polyline[p][0]]);e.leaflet.polyline(t,{color:f(e,e._here.link[s].link),weight:Math.ceil(Math.log(1+e._here.link[s].value*(1/l))*l+e.minWidth)}).on("click",function(t){var n=t.target.getPopup(),r=parseInt(n.getContent(),10);Number.isNaN(r)||(n.setContent(h(e,o,e._here.link[r].value,e._here.link[r].link)),n.update())}).bindPopup(s).addTo(e._layer.link)}if("node"in e._here)for(l=Math.exp((e.s-5)/2)*e.nodeScale*2,o=c(e,"link"),s=0;s<e._here.node.length;s+=1)"circle"in e._here.node[s]&&"value"in e._here.node[s]&&e._here.node[s].circle.length>1&&e.leaflet.circleMarker(e.leaflet.latLng([e._here.node[s].circle[1],e._here.node[s].circle[0]]),{color:e.nodeColor,fill:!1,radius:Math.ceil(Math.log(1+e._here.node[s].value*(1/(2*l)))*l+e.minWidth/2),weight:1}).on("click",function(t){var n=t.target.getPopup(),r=parseInt(n.getContent(),10);Number.isNaN(r)||(n.setContent(h(e,o,e._here.node[r].value,e._here.node[r].link,e._here.node[r].node)),n.update())}).bindPopup(s).addTo(e._layer.node);"here"in e._here&&e._here.here.length>0&&"circle"in e._here.here[0]&&"value"in e._here.here[0]&&e._here.here[0].circle.length>1&&e.leaflet.circle(e.leaflet.latLng([e._here.here[0].circle[1],e._here.here[0].circle[0]]),{color:e.hereColor,fill:!1,interactive:!1,radius:e._here.here[0].value,weight:2}).addTo(e._layer.here)}function g(e){if("object"==typeof L&&"version"in L==!1)return i(e,{message:"Leaflet failed to load"});e.leaflet=L,e=function(e){var t;if("setView"in e.map==0||"on"in e.map==0||"getCenter"in e.map==0||"getZoom"in e.map==0||"attributionControl"in e.map==0){for(;document.getElementById(e._id).firstChild;)document.getElementById(e._id).removeChild(document.getElementById(e._id).firstChild);e.map=e.leaflet.map(e._id,{minZoom:e.minZoom,preferCanvas:!0,attributionControl:!1}),e.leaflet.control.attribution({position:"bottomleft"}).addTo(e.map)}for(e.map.attributionControl.addAttribution('<a href="https://timhowgego.github.io/Aquius/">Aquius</a>'),e.map.setView([e.y,e.x],e.z),e.map.on("moveend",function(){var t,n=e.map.getCenter();e.z=e.map.getZoom(),t=Math.ceil(e.z/3),e.x=parseFloat(n.lng.toFixed(t)),e.y=parseFloat(n.lat.toFixed(t)),d(e,{x:e.x,y:e.y,z:e.z})}),e.map.on("click",function(t){var n=Math.ceil(e.z/3),r=t.latlng;e.c=parseFloat(r.lng.toFixed(n)),e.k=parseFloat(r.lat.toFixed(n)),e.m=e.z,d(e,{c:e.c,k:e.k,m:e.m}),p(e)}),t=0;t<e.base.length;t+=1)"url"in e.base[t]&&("options"in e.base[t]==0&&(e.base[t].options={}),"type"in e.base[t]&&"wms"===e.base[t].type?e.leaflet.tileLayer.wms(e.base[t].url,e.base[t].options).addTo(e.map):e.leaflet.tileLayer(e.base[t].url,e.base[t].options).addTo(e.map));return e}(e=function(e){var t,n,r,a,i,o,c,l,s,p={base:[{options:{attribution:"&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",maxZoom:18},type:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}],c:-1.43,connectivity:1,dataObject:{},dataset:"",hereColor:"#080",k:54.54,leaflet:{},linkColor:"#f00",linkScale:1,locale:"en-US",m:9,map:{},minWidth:2,minZoom:0,n:0,network:[],networkAdd:!0,nodeColor:"#333",nodeScale:1,p:0,panelOpacity:.7,panelScale:1,placeColor:"#00f",placeOpacity:.5,placeScale:1,v:"hlnp",r:0,s:5,uiConnectivity:!0,uiHash:!1,uiLocale:!0,uiNetwork:!0,uiPanel:!0,uiScale:!0,uiService:!0,uiShare:!0,uiStore:!0,t:"en-US",translation:{},x:10.35,y:50.03,z:4},u=Object.keys(p),f=[];function h(e,t){var n,r,a,i={};for(r=0;r<e.dataObject[t].length;r+=1)if(e.dataObject[t][r].length>1&&"object"==typeof e.dataObject[t][r][1])for(n=Object.keys(e.dataObject[t][r][1]),a=0;a<n.length;a+=1)n[a]in i==0&&(i[n[a]]={}),i[n[a]]["_"+t+r]=e.dataObject[t][r][1][n[a]];return i}function b(e,t,n){return e[t]=parseInt(e[t],10),e[t]<0?e[t]=0:n in e.dataObject&&Array.isArray(e.dataObject[n])&&e[t]>=e.dataObject[n].length&&(e[t]=e.dataObject[n].length-1),e}for("object"!=typeof e.dataObject&&(e.dataObject={}),c=0;c<u.length;c+=1)"en-US"===p[u[c]]&&f.push(u[c]),u[c]in e!=0&&typeof e[u[c]]==typeof p[u[c]]||("option"in e.dataObject&&u[c]in e.dataObject.option&&typeof e.dataObject.option[u[c]]==typeof p[u[c]]?e[u[c]]=e.dataObject.option[u[c]]:e[u[c]]=p[u[c]]);for(n=d(e),r=Object.keys(n),c=0;c<r.length;c+=1)-1!==u.indexOf(r[c])&&("number"==typeof e[r[c]]?!1===Number.isNaN(parseFloat(n[r[c]]))&&(e[r[c]]=parseFloat(n[r[c]])):"string"==typeof e[r[c]]&&(e[r[c]]=n[r[c]].toString()));e.network.length>0&&("network"in e.dataObject&&Array.isArray(e.dataObject.network)?"networkAdd"in e&&!1===e.networkAdd?e.dataObject.network=e.network:e.dataObject.network=e.dataObject.network.concat(e.network):e.dataObject.network=e.network),e.z<e.minZoom&&(e.z=e.minZoom),e.m<e.minZoom&&(e.m=e.minZoom),a=[],"translation"in e.dataObject&&a.push(e.dataObject.translation),t=[["network","n"],["service","r"]];for(c=0;c<t.length;c+=1)e=b(e,t[c][1],t[c][0]),t[c][0]in e.dataObject&&Array.isArray(e.dataObject[t[c][0]])&&a.push(h(e,t[c][0]));"meta"in e.dataObject&&("name"in e.dataObject.meta||"attribution"in e.dataObject.meta)&&a.push(function(e){var t,n,r={};if("meta"in e.dataObject&&"name"in e.dataObject.meta&&"object"==typeof e.dataObject.meta.name)for(t=Object.keys(e.dataObject.meta.name),n=0;n<t.length;n+=1)t[n]in r==0&&(r[t[n]]={}),r[t[n]]._datasetName=e.dataObject.meta.name[t[n]].toString();if("meta"in e.dataObject&&"attribution"in e.dataObject.meta&&"object"==typeof e.dataObject.meta.attribution)for(t=Object.keys(e.dataObject.meta.attribution),n=0;n<t.length;n+=1)t[n]in r==0&&(r[t[n]]={}),r[t[n]]._datasetAttribution=e.dataObject.meta.attribution[t[n]].toString();return r}(e)),a.push({"en-US":{lang:"English",connectivity:"Connectivity",connectivityRange:"Any - Frequent",embed:"Embed",export:"Export",here:"Here",language:"Language",link:"Services",network:"Network",node:"Stops",place:"People",scale:"Scale",service:"Period"},"es-ES":{lang:"EspaÃ±ol",connectivity:"Conectividad",connectivityRange:"Cualquier - Frecuente",embed:"Insertar",export:"Exportar",here:"AquÃ­",language:"Idioma",link:"Servicios",network:"Red",node:"Paradas",place:"Personas",scale:"Escala",service:"PerÃ­odo"},"fr-FR":{lang:"FranÃ§ais",connectivity:"ConnectivitÃ©",connectivityRange:"Tout - FrÃ©quent",embed:"InsÃ©rer",export:"Exporter",here:"Ici",language:"Langue",link:"Services",network:"RÃ©seau",node:"ArrÃªts",place:"Personnes",scale:"Ã‰chelle",service:"PÃ©riode"}});for(c=0;c<a.length;c+=1)for(i=Object.keys(a[c]),l=0;l<i.length;l+=1){i[l]in e.translation==0&&(e.translation[i[l]]={}),o=Object.keys(a[c][i[l]]);for(s=0;s<o.length;s+=1)o[s]in e.translation[i[l]]==0&&(e.translation[i[l]][o[s]]=a[c][i[l]][o[s]])}for(c=0;c<f.length;c+=1)e[f[c]]in e.translation==0&&(e[f[c]]=p[f[c]]);return e}(e)),p(e=s(e))}if(!n)return!1;for(;n.firstChild;)n.removeChild(n.firstChild);return Object.keys&&[].indexOf&&"object"==typeof JSON?("object"!=typeof t&&(t={}),t._id=e,t._call=this.here,t._here=void 0,function(e){var t;i(e),"dataObject"in e==0||"object"!=typeof e.dataObject?e.dataObject={}:"dataset"in e&&delete e.dataset,t="leaflet"in e&&"object"==typeof e.leaflet&&"version"in e.leaflet&&!1===Number.isNaN(parseInt(e.leaflet.version.split(".")[0],10))&&parseInt(e.leaflet.version.split(".")[0],10)>=1?[]:["https://unpkg.com/leaflet@1.6.0/dist/leaflet.css","https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"],"undefined"!=typeof Promise?function(e,t){var n,r=[];function a(e){return new Promise(function(t,n){var r;"css"===e.split(".").pop()?((r=document.createElement("link")).rel="stylesheet",r.href=e):(r=document.createElement("script")).src=e,r.onload=t,r.onerror=n,document.head.appendChild(r)})}for(n=0;n<t.length;n+=1)r.push(a(t[n]));"dataset"in e&&"string"==typeof e.dataset&&r.push(fetch(e.dataset)),0===r.length?g(e):Promise.all(r).then(function(t){return"dataset"in e&&"string"==typeof e.dataset?t[r.length-1].json():e.dataObject}).then(function(t){e.dataObject=t,g(e)}).catch(function(t){return i(e,t)})}(e,t):o(e,t)}(t),!0):(n.appendChild(document.createTextNode("Browser not supported by Aquius: Try a modern browser")),n.style.height="auto",!1)},here:function(e,t){"use strict";var n,r={};function a(e){var t,n,r=Object.keys(e).sort();if(0===r.length)return[];if(1===r.length)return[e[r[0]]];for(t=[],n=0;n<r.length;n+=1)t.push(e[r[n]]);return t}function i(e,t,n){var r,a=["connect","serviceNode","serviceLink"];for(r=0;r<a.length;r+=1)a[r]in t&&delete t[a[r]];return void 0===e&&"error"in t&&(e=new Error(t.error)),"callback"in n?(n.callback(e,t,n),!0):t}if(!Object.keys||![].indexOf||"object"!=typeof JSON)return r.error="Unsupported browser",i(n,r,t);if("x"in t&&"number"!=typeof t.x||"y"in t&&"number"!=typeof t.y||"range"in t&&"number"!=typeof t.range)return r.error="Here parameters not numeric",i(n,r,t);"object"!=typeof t&&(t={}),r.dataObject=e,"x"in t&&"y"in t&&"range"in t&&(r.here=[{circle:[t.x,t.y],value:t.range}]),r.summary={link:0,node:0,place:0};try{return(r=function(e){var n,r,a,i,o,c={0:{link:[[0],[0],[0],{}],network:[[0],{"en-US":"Unknown"},{}],node:[0,0,{}],place:[0,0,{}],service:[[0],{"en-US":"Unknown"},{}]}};if("sanitize"in t&&!1===t.sanitize)return e;"object"!=typeof e.dataObject&&(e.dataObject={}),"meta"in e.dataObject==0&&(e.dataObject.meta={}),"schema"in e.dataObject.meta!=0&&e.dataObject.meta.schema in c!=0||(e.dataObject.meta.schema="0"),n=Object.keys(c[e.dataObject.meta.schema]);for(r=0;r<n.length;r+=1)n[r]in e.dataObject&&"object"!=typeof e.dataObject[n[r]]&&delete e.dataObject[n[r]];for(r=0;r<n.length;r+=1){n[r]in e.dataObject!=0&&0!=Array.isArray(e.dataObject[n[r]])&&0!==e.dataObject[n[r]].length||(e.dataObject[n[r]]=[c[e.dataObject.meta.schema][n[r]]]);for(a=0;a<e.dataObject[n[r]].length;a+=1){if(e.dataObject[n[r]][a].length<c[e.dataObject.meta.schema][n[r]].length)for(i=e.dataObject[n[r]][a].length-1;i<c[e.dataObject.meta.schema][n[r]].length;i+=1)e.dataObject[n[r]][a].push(c[e.dataObject.meta.schema][n[r]][i]);for(i=0;i<c[e.dataObject.meta.schema][n[r]].length;i+=1)if(typeof e.dataObject[n[r]][a][i]!=typeof c[e.dataObject.meta.schema][n[r]][i]&&("node"!==n[r]&&"place"!==n[r]||2!==i||"number"!=typeof e.dataObject[n[r]][a][i]?"link"!==n[r]||"number"!=typeof e.dataObject[n[r]][a][i]||0!==i&&1!==i?e.dataObject[n[r]][a][i]=c[e.dataObject.meta.schema][n[r]][i]:e.dataObject[n[r]][a][i]=[e.dataObject[n[r]][a][i]]:e.dataObject[n[r]][a][i]={p:e.dataObject[n[r]][a][i]}),Array.isArray(e.dataObject[n[r]][a][i]))for(o=0;o<e.dataObject[n[r]][a][i].length;o+=1)typeof e.dataObject[n[r]][a][i][o]!=typeof c[e.dataObject.meta.schema][n[r]][i][0]&&(e.dataObject[n[r]][a][i][o]=c[e.dataObject.meta.schema][n[r]][i][0])}}return e}(r)).dataObject.place.length>0&&(r.connect={}),i(n,r=function(e,t){return e=function(e,t){var n,r,a,i;if(e.place=[],"connect"in e)for(r=Object.keys(e.connect),i=0;i<r.length;i+=1)r[i]<e.dataObject.place.length&&(a=0,"p"in e.dataObject.place[r[i]][2]?a=e.dataObject.place[r[i]][2].p:"population"in e.dataObject.place[r[i]][2]&&(a=e.dataObject.place[r[i]][2].population),Number.isNaN(a)||("connectivity"in t&&t.connectivity>0&&(a*=1-1/(e.connect[r[i]]*t.connectivity)),(a=Math.round(a))>0&&(e.summary.place+=a,n={circle:[e.dataObject.place[r[i]][0],e.dataObject.place[r[i]][1]],value:a},"r"in e.dataObject.place[r[i]][2]?n.place=e.dataObject.place[r[i]][2].r:"reference"in e.dataObject.place[r[i]][2]&&(n.place=e.dataObject.place[r[i]][2].reference),e.place.push(n))));return e}(e=function(e){var t,n,r,i=e.dataObject.node.length-1;for(e.node=[],r=0;r<e.serviceNode.length;r+=1)void 0!==e.serviceNode[r]&&r<=i&&(e.summary.node+=1,n={circle:[(t=e.dataObject.node[r])[0],t[1]],value:e.serviceNode[r].service},"reference"in e.serviceNode[r]&&(n.link=a(e.serviceNode[r].reference)),"reference"in t[2]&&(t[2].r=t[2].reference),"r"in t[2]&&t[2].r.length>0&&(n.node=t[2].r),e.node.push(n));return e}(e),t),"geoJSON"in t!=0&&Array.isArray(t.geoJSON)?function(e,t){var n,r,a,i,o,c={type:"FeatureCollection",features:[]};for(a=0;a<t.length;a+=1)if(t[a]in e)for(i=0;i<e[t[a]].length;i+=1)if("value"in e[t[a]][i]&&("circle"in e[t[a]][i]||"polyline"in e[t[a]][i])){if("circle"in e[t[a]][i])n={type:"Point",coordinates:e[t[a]][i].circle};else for(n={type:"LineString",coordinates:[]},o=0;o<e[t[a]][i].polyline.length;o+=1)n.coordinates.push(e[t[a]][i].polyline[o]);r={type:t[a],value:e[t[a]][i].value},"link"in e[t[a]][i]&&(r.link=e[t[a]][i].link),"node"in e[t[a]][i]&&(r.node=e[t[a]][i].node),"place"in e[t[a]][i]&&(r.place=e[t[a]][i].place),c.features.push({type:"Feature",geometry:n,properties:r})}return c}(e,t.geoJSON):e}(r=function(e){function t(e,t){var n,r=t.length-1,a=[];for(n=0;n<e.length;n+=1)e[n]<=r&&e[n]>=0&&a.push([t[e[n]][0],t[e[n]][1]]);return a}return e=function(e,n){var r,i,o,c,l,d=Object.keys(n.od);for(e.link=[],c=0;c<d.length;c+=1){for(o=[n.od[d[c]].pop()];n.od[d[c]].length>0;)for(i=n.od[d[c]].pop(),l=0;l<o.length;l+=1){if(i[0]===o[l][0]){o[l].unshift(i[1]);break}if(i[1]===o[l][0]){o[l].unshift(i[0]);break}if(i[0]===o[l][o.length-1]){o[l].push(i[1]);break}if(i[1]===o[l][o.length-1]){o[l].push(i[0]);break}if(l===o.length-1){o.push(i);break}}for(l=0;l<o.length;l+=1)r={polyline:t(o[l],e.dataObject.node),value:n.data[d[c]].service},"reference"in n.data[d[c]]&&(r.link=a(n.data[d[c]].reference)),e.link.push(r)}return e}(e,function(e){var t,n,r,a,i,o,c=Object.keys(e),l={od:{},data:{}};for(i=0;i<c.length;i+=1)for(r=c[i]-0,t=Object.keys(e[r]),o=0;o<t.length;o+=1)n=t[o]-0,a=e[r][n].service.toString(),"reference"in e[r][n]&&(a+=":"+Object.keys(e[r][n].reference).join(":")),a in l.od==0&&(l.od[a]=[],l.data[a]=e[r][n]),l.od[a].push([r,n]);return l}(e.serviceLink))}(r=function(e,t){var n,r,a;function i(e,t){var n;if(!("product"in e))return!0;if(1===t.length){if(t[0]in e.product)return!0}else for(n=0;n<t.length;n+=1)if(t[n]in e.product)return!0;return!1}function o(e,t){return!("h"in t&&"product"in e&&t.h in e.product||"shared"in t&&"product"in e&&t.shared in e.product)}function c(e,t,n){var r;for(r=0;r<t.length;r+=1)if(t[r]in e.here){if("s"in n==0&&"setdown"in n==0)return!0;if("s"in n&&Array.isArray(n.s)&&-1===n.s.indexOf(t[r]))return!0;if("setdown"in n&&Array.isArray(n.setdown)&&-1===n.setdown.indexOf(t[r]))return!0;if("d"in n==0&&"direction"in n==0){if("u"in n==0&&"pickup"in n==0)return!0;if("u"in n&&Array.isArray(n.u)&&-1===n.u.indexOf(t[r]))return!0;if("pickup"in n&&Array.isArray(n.pickup)&&-1===n.pickup.indexOf(t[r]))return!0}}return!1}function l(e,t,n){var r;if(1===n.length&&("service"in t==0||0 in t.service))return e.level=n[0],e;for(e.level=0,r=0;r<n.length;r+=1)("service"in t==0||r in t.service)&&(e.level+=n[r]);return e}function d(e,t,n,r){var a;if("circular"in r&&(r.c=r.circular),n.length>1&&"c"in r&&(r.c||1===r.c)&&(e.circular=n.length-1),"direction"in r&&(r.d=r.direction),"d"in r&&(r.d||1===r.d)){for(e.direction=1,a=0;a<n.length;a+=1)if(n[a]in t.here){"circular"in e?(e.route=n.slice(0,-1),e.route=e.route.slice(a).concat(e.route.slice(0,a)),e.route.push(e.route[0])):e.route=n.slice(a);break}}else e.route=n;return"route"in e==0&&(e.route=[]),e}function s(e,t,n){var r;if("pickup"in n&&(n.u=n.pickup),"u"in n&&Array.isArray(n.u)&&n.u.length>0)for(e.pickupIndex={},r=0;r<n.u.length;r+=1)e.pickupIndex[n.u[r]]="";if("setdown"in n&&(n.s=n.setdown),"s"in n&&Array.isArray(n.s)&&n.s.length>0)for(e.setdownIndex={},r=0;r<n.s.length;r+=1)e.setdownIndex[n.s[r]]="";return e}function p(e,t,n,r){var a;if("split"in r&&(r.t=r.split),"t"in r&&Array.isArray(r.t)&&r.t.length>0){for(e.splitsIndex={},a=0;a<r.t.length;a+=1)e.splitsIndex[r.t[a]]="";for(e.splits=2,a=0;a<n.length;a+=1)if(n[a]in e.splitsIndex==0&&n[a]in t.here){e.splits=1;break}}return e}function u(e,t,n){var r;if("reference"in t&&(t.r=t.reference),"r"in t&&Array.isArray(t.r)&&t.r.length>0)for(e.reference=t.r,r=0;r<e.reference.length;r+=1)e.reference[r].p=n;return e}function f(e,t){return"block"in t&&(t.b=t.block),"b"in t&&(e.block=t.b),e}function h(e,t){var n;if(!Array.isArray(t)||0===t.length)return e;for(n=0;n<t.length;n+=1)"i"in t[n]?t[n].i in e==0&&(e[t[n].i]=t[n]):"n"in t[n]?t[n].n in e==0&&(e[t[n].n]=t[n]):"c"in t[n]&&t[n].c in e==0&&(e[t[n].c]=t[n]);return e}function b(e,t,n){var r,a,i,o,c,l,d,s,p=!1,u=!1,f=0,b=!0,g={},v=-1,m=0;function O(e,t,n,r){if("block"in t){if("block"in e==0&&(e.block={}),t.block in e.block==0&&(e.block[t.block]={}),n in e.block[t.block])return e;e.block[t.block][n]=""}return void 0===e.serviceNode[n]?e.serviceNode[n]={reference:{},service:r}:e.serviceNode[n].service+=r,"reference"in t&&(e.serviceNode[n].reference=h(e.serviceNode[n].reference,t.reference)),e}function y(e,t,n,r,a){var i,o,c;if(n<r?(o=r,i=n):(o=n,i=r),"block"in t){if("block"in e==0&&(e.block={}),t.block in e.block==0&&(e.block[t.block]={}),(c=o.toString()+":"+i.toString())in e.block[t.block])return e;e.block[t.block][c]=""}return void 0===e.serviceLink[o]&&(e.serviceLink[o]=[]),void 0===e.serviceLink[o][i]?e.serviceLink[o][i]={reference:{},service:a}:e.serviceLink[o][i].service+=a,"reference"in t&&(e.serviceLink[o][i].reference=h(e.serviceLink[o][i].reference,t.reference)),e}if("pickupIndex"in t&&t.route[t.route.length-1]in t.pickupIndex){for(s=t.route.length-1;s>=0;s--)if(t.route[s]in t.pickupIndex==0){i=s;break}}else i=t.route.length-1;"block"in t&&"block"in e&&t.block in e.block&&(b=!1);for(s=0;s<=i;s+=1)d=0,o=t.route[s],r="connect"in e&&("splits"in t==0||2===t.splits||o in t.splitsIndex),!1===p&&o in n.here&&(p=!0),o in n.here?(u&&("pickupIndex"in t==0||o in t.pickupIndex==0)||("setdownIndex"in t==0||o in t.setdownIndex==0)&&s!==i)&&(d="direction"in t==0&&(0===s&&t.route[s+1]in n.here==0||s===i&&t.route[s-1]in n.here==0)&&"circular"in t==0?t.level/2:t.level):"direction"in t!=0||(!p||"pickupIndex"in t!=0&&o in t.pickupIndex!=0)&&(!1!==p||"setdownIndex"in t!=0&&o in t.setdownIndex!=0)?!p||"pickupIndex"in t!=0&&o in t.pickupIndex!=0||(d=t.level):d=t.level/2,d>0&&("splits"in t==0||2===t.splits||o in t.splitsIndex)&&("circular"in t==0||s<i)&&(e=O(e,t,o,d)),b&&d>f&&(f=d),!1!==u||"setdownIndex"in t!=0&&o in t.setdownIndex!=0||!("direction"in t==0||o in n.here)||(u=!0),-1!==v&&m>0&&("splits"in t==0||2===t.splits||o in t.splitsIndex||t.route[v]in t.splitsIndex)&&(l="direction"in t==0&&t.route[v]in n.here&&("setdownIndex"in t==0||"pickupIndex"in t==0||o in t.setdownIndex==0||o in t.pickupIndex==0)?d:m,e=y(e,t,t.route[v],o,l)),d>0&&(m=d),v=s,r&&d>0&&(c=-1,"p"in e.dataObject.node[o][2]?c=e.dataObject.node[o][2].p:"place"in e.dataObject.node[o][2]&&(c=e.dataObject.node[o][2].place),c>=0&&(c in g==0||d>g[c])&&(g[c]=d));if("splits"in t!=0&&2!==t.splits||(e.summary.link+=f),r)for(a=Object.keys(g),s=0;s<a.length;s+=1)a[s]in e.connect?e.connect[a[s]]+=g[a[s]]:e.connect[a[s]]=g[a[s]];return e}for(e.serviceLink=[],e.serviceNode=[],n=function(e,t){var n,r,a,i,o,c,l,d,s,p={};if("network"in t&&"number"==typeof t.network&&t.network>=0&&t.network<e.dataObject.network.length)for(p.product={},n=0;n<e.dataObject.network[t.network][0].length;n+=1)p.product[e.dataObject.network[t.network][0][n]]=e.dataObject.network[t.network][0][n];for(p.here={},n=0;n<e.dataObject.node.length;n+=1)e.dataObject.node[n].length>1&&("range"in t==0||"x"in t==0||"y"in t==0||t.range>=(r=t.y,a=t.x,i=e.dataObject.node[n][1],o=e.dataObject.node[n][0],c=void 0,l=void 0,d=void 0,s=void 0,c=Math.PI/180,l=Math.sin((i-r)*c/2),d=Math.sin((o-a)*c/2),s=l*l+Math.cos(r*c)*Math.cos(i*c)*d*d,2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371e3))&&("place"in t==0||!Array.isArray(t.place)||"p"in e.dataObject.node[n][2]==0&&"place"in e.dataObject.node[n][2]==0||"p"in e.dataObject.node[n][2]&&-1!==t.place.indexOf(e.dataObject.node[n][2].p)||"place"in e.dataObject.node[n][2]&&-1!==t.place.indexOf(e.dataObject.node[n][2].place))&&(p.here[n]=n);if("service"in t&&"number"==typeof t.service&&t.service>=0&&t.service<e.dataObject.service.length)for(p.service={},n=0;n<e.dataObject.service[t.service][0].length;n+=1)p.service[e.dataObject.service[t.service][0][n]]=e.dataObject.service[t.service][0][n];return p}(e,t),a=0;a<e.dataObject.link.length;a+=1)i(n,e.dataObject.link[a][0])&&o(n,e.dataObject.link[a][3])&&c(n,e.dataObject.link[a][2],e.dataObject.link[a][3])&&(r=l(r={},n,e.dataObject.link[a][1])).level>0&&(e=b(e,r=f(r=u(r=p(r=s(r=d(r,n,e.dataObject.link[a][2],e.dataObject.link[a][3]),0,e.dataObject.link[a][3]),n,e.dataObject.link[a][2],e.dataObject.link[a][3]),e.dataObject.link[a][3],e.dataObject.link[a][0]),e.dataObject.link[a][3]),n));return"block"in e&&delete e.block,e}(r,t)),t),t)}catch(e){return i(n=e,r,t)}}};